<!DOCTYPE html>
<html lang="fa" dir="rtl" x-data="{ darkMode: true }" :class="{ 'dark': darkMode }"
      x-init="darkMode = JSON.parse(localStorage.getItem('darkMode')) ?? true">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ورود ادمین | وینور (Vinor) – vinor.ir</title>
  <meta name="description" content="ورود به پنل مدیریت وینور (Vinor) | بازار آنلاین خرید و فروش ملک با تمرکز بر سرعت، امنیت و شفافیت." />

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['iranyekan', 'ui-sans-serif', 'system-ui'] },
          colors: { vinor: { 600: '#0ea5e9', 700: '#0284c7' } }
        }
      }
    }
  </script>
  <!-- Alpine.js -->
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <!-- Font: IranYekan -->
  <link rel="preload" as="font" type="font/woff2" crossorigin
        href="{{ url_for('static', filename='fonts/iranyekan.woff2') }}">
  <style>
    @font-face {
      font-family: 'iranyekan';
      src: url('{{ url_for('static', filename='fonts/iranyekan.woff2') }}') format('woff2');
      font-weight: 100 900; font-style: normal; font-display: swap;
    }
    body { font-family: 'iranyekan', ui-sans-serif, system-ui; }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center p-4">

  <form method="POST" action="{{ url_for('admin.login') }}"
        class="w-full max-w-xs sm:max-w-sm bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-5 sm:p-6 relative">

    <!-- CSRF (ضروری) -->
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <!-- سوییچ دارک‌مود -->
    <button type="button" aria-label="تغییر حالت رنگ"
            @click="darkMode = !darkMode; localStorage.setItem('darkMode', darkMode)"
            class="absolute top-3 left-3 text-gray-500 dark:text-yellow-300 hover:opacity-80 transition">
      <!-- آیکون‌ها با SVG، بدون وابستگی خارجی -->
      <svg x-show="!darkMode" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
           viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75"
           d="M12 3v2m0 14v2m7-9h2M3 12H1m15.364-6.364l1.414 1.414M4.222 19.778l1.414-1.414m0-12.728L4.222 4.222M18.778 19.778l-1.414-1.414M12 8a4 4 0 100 8 4 4 0 000-8z"/></svg>
      <svg x-show="darkMode" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24"
           fill="currentColor"><path d="M21.64 13.01A9 9 0 1111 2.36a7 7 0 0010.64 10.65z"/></svg>
    </button>

    <!-- برندینگ وینور -->
    <div class="mb-6 text-center">
      <div class="mx-auto mb-2 h-10 w-10 rounded-2xl bg-vinor-600/10 dark:bg-vinor-600/20 flex items-center justify-center">
        <span class="text-vinor-700 dark:text-vinor-600 font-extrabold text-lg">V</span>
      </div>
      <h1 class="text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100">ورود به پنل مدیریت وینور</h1>
      <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1">سریع • امن • شفاف</p>
    </div>

    <!-- اعلان‌ها -->
    {% with messages = get_flashed_messages(with_categories=True) %}
      {% if messages %}
        <div class="mb-4 space-y-3" role="status" aria-live="polite">
          {% for category, msg in messages %}
            <div class="text-sm rounded-xl px-4 py-3 border flex items-start gap-3
                        {% if category in ['success', 'ok'] %}
                          bg-emerald-50 text-emerald-800 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-200 dark:border-emerald-800/50
                        {% elif category in ['warning'] %}
                          bg-amber-50 text-amber-800 border-amber-200 dark:bg-amber-900/20 dark:text-amber-200 dark:border-amber-800/50
                        {% elif category in ['info'] %}
                          bg-blue-50 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-200 dark:border-blue-800/50
                        {% else %}
                          bg-rose-50 text-rose-800 border-rose-200 dark:bg-rose-900/20 dark:text-rose-200 dark:border-rose-800/50
                        {% endif %}">
              <i class="fas mt-0.5 flex-shrink-0
                        {% if category in ['success', 'ok'] %}fa-check-circle{% elif category in ['warning'] %}fa-exclamation-triangle{% elif category in ['info'] %}fa-info-circle{% else %}fa-times-circle{% endif %}"></i>
              <span class="flex-1">{{ msg }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- ایمیل -->
    <label class="block mb-4">
      <input name="username" type="email" inputmode="email" autocomplete="username" dir="ltr"
             placeholder="ایمیل مدیر (مثال: admin@vinor.ir)"
             class="w-full px-3 py-2 rounded-xl bg-gray-50 dark:bg-gray-700/60
                    border border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-100
                    placeholder:text-gray-400 dark:placeholder:text-gray-300
                    focus:outline-none focus:ring-2 focus:ring-vinor-600 focus:border-transparent"
             required>
    </label>

    <!-- رمز عبور -->
    <label class="block mb-5">
      <input name="password" type="password" autocomplete="current-password"
             placeholder="رمز عبور"
             class="w-full px-3 py-2 rounded-xl bg-gray-50 dark:bg-gray-700/60
                    border border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-100
                    placeholder:text-gray-400 dark:placeholder:text-gray-300
                    focus:outline-none focus:ring-2 focus:ring-vinor-600 focus:border-transparent"
             required>
    </label>

    <!-- دکمه ورود -->
    <button type="submit"
            class="w-full py-2.5 rounded-xl font-semibold
                   bg-vinor-600 hover:bg-vinor-700 text-white transition">
      ورود به سیستم
    </button>

    <!-- یادداشت امنیتی کوچک -->
    <p class="mt-3 text-[11px] text-gray-400 dark:text-gray-500 text-center leading-relaxed">
      با ورود، شرایط استفاده و سیاست‌های امنیتی وینور را می‌پذیرید.
    </p>
  </form>

</body>
</html>
