<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Ø¢ÙÙ„Ø§ÛŒÙ† | Ù¾Ù†Ù„ Ù‡Ù…Ú©Ø§Ø±Ø§Ù† ÙˆÛŒÙ†ÙˆØ±</title>
  <meta name="theme-color" content="#7c3aed">
  <style>
    :root { color-scheme: light; }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Vazirmatn", "IRANSans", "Tahoma", sans-serif;
      background: #f6f7fb;
      color: #0f172a;
    }
    .page { min-height: 100vh; display: flex; flex-direction: column; }
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid #e5e7eb;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    header .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      font-size: 15px;
      color: #111827;
    }
    header .status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #fee2e2;
      color: #b91c1c;
      font-size: 12px;
      font-weight: 700;
    }
    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 28px 16px 32px;
    }
    .card {
      width: min(520px, 100%);
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 18px;
      box-shadow: 0 10px 40px rgba(15,23,42,0.08);
      padding: 22px 20px;
      display: grid;
      gap: 16px;
    }
    .hero { display: flex; align-items: center; gap: 12px; }
    .hero .bubble {
      width: 64px; height: 64px; border-radius: 16px;
      background: linear-gradient(135deg, #f97316 0%, #ec4899 100%);
      display: grid; place-items: center;
      color: #fff; font-size: 28px;
      box-shadow: 0 10px 30px rgba(236,72,153,0.25);
    }
    h1 { margin: 0; font-size: 20px; color: #0f172a; }
    p.lead { margin: 4px 0 0; color: #475569; font-size: 13px; line-height: 1.6; }
    .actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
    }
    .btn {
      border: none; cursor: pointer;
      padding: 12px 14px;
      border-radius: 12px;
      font-weight: 700; font-size: 14px;
      display: inline-flex; align-items: center; justify-content: center;
      gap: 8px;
      transition: transform 0.1s ease, box-shadow 0.2s ease;
    }
    .btn:active { transform: translateY(1px); }
    .btn.primary {
      background: linear-gradient(120deg, #16a34a 0%, #10b981 100%);
      color: #fff;
      box-shadow: 0 10px 25px rgba(16,185,129,0.25);
    }
    .btn.secondary {
      background: #f1f5f9; color: #0f172a;
      border: 1px solid #e2e8f0;
    }
    .btn.ghost {
      background: #fff7ed; color: #c2410c;
      border: 1px solid #fed7aa;
    }
    .help {
      background: #f8fafc;
      border: 1px dashed #cbd5e1;
      border-radius: 14px;
      padding: 12px;
      display: grid; gap: 8px;
      font-size: 13px; color: #0f172a;
    }
    .help .row { display: flex; align-items: center; gap: 8px; }
    .pill {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 6px 10px; border-radius: 999px;
      background: #eef2ff; color: #4338ca;
      font-weight: 700; font-size: 12px;
      width: fit-content;
    }
    .meta {
      display: flex; justify-content: space-between; align-items: center;
      font-size: 12px; color: #475569;
      border-top: 1px solid #e5e7eb;
      padding-top: 10px; margin-top: 4px;
    }
    @media (max-width: 480px) {
      header { padding: 10px 12px; }
      .card { padding: 18px 16px; border-radius: 14px; }
      .hero .bubble { width: 56px; height: 56px; font-size: 24px; }
      h1 { font-size: 18px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="brand">
        <span style="font-size:18px">ğŸ“¡</span>
        <span>ÙˆÛŒÙ†ÙˆØ± Ø§Ú©Ø³Ù¾Ø±Ø³</span>
      </div>
      <div class="status" id="netStatus"><span>Ø¢ÙÙ„Ø§ÛŒÙ†</span></div>
    </header>

    <main>
      <div class="card">
        <div class="hero">
          <div class="bubble">âš¡</div>
          <div>
            <h1>Ø§ØªØµØ§Ù„ Ù‚Ø·Ø¹ Ø´Ø¯Ù‡ Ø§Ø³Øª</h1>
            <p class="lead">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯. Ø¯Ø± ØµÙˆØ±Øª ÙˆØµÙ„ Ø´Ø¯Ù†ØŒ ØµÙØ­Ù‡ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØªØ§Ø²Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary" id="btnRetry">ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯</button>
          <a class="btn secondary" href="/express/partner/dashboard">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
          <button class="btn ghost" id="btnCheck">Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø±ÛŒØ¹</button>
        </div>

        <div class="help">
          <div class="row">
            <span class="pill">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³Ø±ÛŒØ¹</span>
          </div>
          <div class="row">1) ÙˆØ§ÛŒâ€ŒÙØ§ÛŒ/Ø¯Ø§Ø¯Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø±Ø§ Ø±ÙˆØ´Ù† Ú©Ù†ÛŒØ¯.</div>
          <div class="row">2) Ø¯Ø± ØµÙˆØ±Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² VPNØŒ Ø¢Ù† Ø±Ø§ Ù…ÙˆÙ‚ØªØ§Ù‹ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯.</div>
          <div class="row">3) Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ø¢ÙÙ„Ø§ÛŒÙ† Ù‡Ø³ØªÛŒØ¯ØŒ Ú©Ù…ÛŒ Ø¨Ø¹Ø¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.</div>
        </div>

        <div class="meta">
          <span>Ø¢Ø®Ø±ÛŒÙ† Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ: <strong id="lastSync">â€”</strong></span>
          <span id="pingResult">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒâ€¦</span>
        </div>
      </div>
    </main>
  </div>

  <script>
    (function(){
      const statusEl = document.getElementById('netStatus');
      const lastSyncEl = document.getElementById('lastSync');
      const pingEl = document.getElementById('pingResult');
      const btnRetry = document.getElementById('btnRetry');
      const btnCheck = document.getElementById('btnCheck');

      // Ù†Ù…Ø§ÛŒØ´ Ø¢Ø®Ø±ÛŒÙ† Ø²Ù…Ø§Ù† Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡ (Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯)
      try {
        const lastSync = localStorage.getItem('vinor_last_sync') || '';
        lastSyncEl.textContent = lastSync ? lastSync : 'â€”';
      } catch (_) {
        lastSyncEl.textContent = 'â€”';
      }

      function setStatus(text, color) {
        statusEl.textContent = text;
        statusEl.style.background = color.bg;
        statusEl.style.color = color.fg;
      }

      async function ping() {
        pingEl.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªØµØ§Ù„...';
        try {
          const res = await fetch('/healthz', { cache: 'no-store' });
          if (res.ok) {
            setStatus('Ø¢Ù†Ù„Ø§ÛŒÙ†', { bg: '#dcfce7', fg: '#166534' });
            pingEl.textContent = 'Ø§ØªØµØ§Ù„ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø´Ø¯Ø› Ø¯Ø± Ø­Ø§Ù„ ØªØ§Ø²Ù‡â€ŒØ³Ø§Ø²ÛŒ...';
            setTimeout(() => window.location.reload(), 700);
            return;
          }
          pingEl.textContent = 'Ù¾Ø§Ø³Ø® Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø² Ø³Ø±ÙˆØ±';
        } catch (e) {
          pingEl.textContent = 'Ø§ØªØµØ§Ù„ Ø¨Ø±Ù‚Ø±Ø§Ø± Ù†ÛŒØ³Øª';
          setStatus('Ø¢ÙÙ„Ø§ÛŒÙ†', { bg: '#fee2e2', fg: '#b91c1c' });
        }
      }

      btnRetry.addEventListener('click', () => window.location.reload());
      btnCheck.addEventListener('click', () => ping());

      window.addEventListener('online', () => {
        setStatus('Ø¢Ù†Ù„Ø§ÛŒÙ†', { bg: '#dcfce7', fg: '#166534' });
        pingEl.textContent = 'Ø§ØªØµØ§Ù„ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø´Ø¯Ø› Ø¯Ø± Ø­Ø§Ù„ ØªØ§Ø²Ù‡â€ŒØ³Ø§Ø²ÛŒ...';
        setTimeout(() => window.location.reload(), 600);
      });
      window.addEventListener('offline', () => {
        setStatus('Ø¢ÙÙ„Ø§ÛŒÙ†', { bg: '#fee2e2', fg: '#b91c1c' });
        pingEl.textContent = 'Ù‡Ù…Ú†Ù†Ø§Ù† Ø¢ÙÙ„Ø§ÛŒÙ† Ù‡Ø³ØªÛŒØ¯';
      });
    })();
  </script>
</body>
</html>

