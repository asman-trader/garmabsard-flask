{% set bottom_nav_active = bottom_nav_active|default('') %}
<nav class="fixed inset-x-0 bottom-3 z-50 px-4">
  <div class="max-w-md mx-auto">
    <div class="grid grid-cols-4 gap-2 rounded-2xl border border-gray-200/70 dark:border-gray-700/70 bg-white/90 dark:bg-gray-900/90 backdrop-blur shadow-lg px-2 py-2">
      {% set nav_items = [
        {'key': 'dashboard', 'endpoint': 'express_partner.dashboard', 'icon': 'fa-folder-open', 'label': 'فایل‌ها'},
        {'key': 'commissions', 'endpoint': 'express_partner.commissions', 'icon': 'fa-chart-line', 'label': 'پورسانت'},
        {'key': 'notifications', 'endpoint': 'express_partner.notifications', 'icon': 'fa-bell', 'label': 'اعلان'},
        {'key': 'profile', 'endpoint': 'express_partner.profile', 'icon': 'fa-user', 'label': 'من'}
      ] %}
      {% for item in nav_items %}
        {% set is_active = (bottom_nav_active == item.key) %}
        <a href="{{ url_for(item.endpoint) }}"
           class="relative flex flex-col items-center gap-1 text-[11px] sm:text-xs font-medium transition-all duration-200 {{ 'text-gray-900 dark:text-white' if is_active else 'text-gray-500 dark:text-gray-400' }}"
           aria-current="{{ 'page' if is_active else 'false' }}">
          <span class="relative inline-flex h-10 w-10 items-center justify-center rounded-xl transition-all {{ 'bg-gradient-to-br from-[#7C3AED] to-[#6D28D9] text-white shadow-lg scale-100' if is_active else 'bg-gray-100/80 dark:bg-gray-800/70 text-gray-500 dark:text-gray-400 shadow-none scale-95' }}">
            <i class="fas {{ item.icon }} text-[15px]"></i>
          </span>
          <span class="leading-tight">{{ item.label }}</span>
          {% if is_active %}
            <span class="absolute -top-1 h-1.5 w-6 rounded-full bg-[#7C3AED]"></span>
          {% endif %}
        </a>
      {% endfor %}
    </div>
  </div>
</nav>
