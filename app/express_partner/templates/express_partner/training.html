{% extends 'express_partner/base.html' %}
{% block title %}ุขููุฒุด ู ุฏุณุชูุฑุงูุนููโูุง | ุฑูุชู ณ ูุฑุญููโุง{% endblock %}
{% block content %}

  <!-- Header - ุณุจฺฉ ุฏูุงุฑ (ุชูุงูโุนุฑุถ) -->
  <header class="sticky top-0 z-50 bg-white/95 dark:bg-gray-900/95 backdrop-blur border-b border-gray-200 dark:border-gray-800 w-full">
    <div class="w-full px-4 h-14 flex items-center justify-between">
      <a href="{{ url_for('express_partner.dashboard') }}" class="w-9 h-9 grid place-items-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-700" aria-label="ุจุงุฒฺฏุดุช">
        <i class="fas fa-arrow-right text-gray-600 dark:text-gray-400"></i>
      </a>
      <h1 class="text-sm font-bold text-gray-900 dark:text-white">ุขููุฒุด ู ุฏุณุชูุฑุงูุนููโูุง</h1>
      <div class="w-9"></div>
    </div>
  </header>

<div class="max-w-4xl mx-auto pt-0 px-3 sm:px-4 pb-16">

  <!-- Intro badge -->
  <div class="mt-4">
    <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 text-xs font-semibold border border-emerald-100 dark:border-emerald-800">
      <i class="fa-solid fa-bolt"></i>
      ุฑูุชู ุณุฑุน ู ุนูู ุจุฑุง ููฺฉุงุฑุงู
    </div>
  </div>

  <!-- Progress / Checkable steps -->
  <div class="mt-4">
    <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 sm:p-5 shadow-sm space-y-3">
      <div class="flex items-center justify-between text-xs font-semibold text-gray-700 dark:text-gray-300">
        <span>ูพุดุฑูุช ุฑูุชู</span>
        <span id="routineProgressText">ฐ / ณ</span>
      </div>
      <div class="h-2 w-full bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden">
        <div id="routineProgressBar" class="h-2 bg-emerald-500 rounded-full w-0 transition-[width] duration-200"></div>
      </div>
      <div class="pt-2 space-y-2">
        <label class="flex items-center gap-3 text-sm text-gray-800 dark:text-gray-100">
          <input type="checkbox" class="routine-step accent-emerald-500 w-4 h-4" data-step="1">
          <span class="flex-1">ฑ๏ธโฃ ุจุงุฒุงุฑุงุจ ุฑุง ฺฉุงูู ูุทุงูุนู ู ุดุฑูุน ฺฉู</span>
        </label>
        <label class="flex items-center gap-3 text-sm text-gray-800 dark:text-gray-100">
          <input type="checkbox" class="routine-step accent-amber-500 w-4 h-4" data-step="2">
          <span class="flex-1">ฒ๏ธโฃ ุจุงุฒุฏุฏ ุฑุง ููุงููฺฏ ู ูุชุฌู ุฑุง ุซุจุช ฺฉู</span>
        </label>
        <label class="flex items-center gap-3 text-sm text-gray-800 dark:text-gray-100">
          <input type="checkbox" class="routine-step accent-indigo-500 w-4 h-4" data-step="3">
          <span class="flex-1">ณ๏ธโฃ ูุนุงููู ุฑุง ูพฺฏุฑ ู ูุฑุงุฑุฏุงุฏ ุฑุง ุจุจูุฏ</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Main Content: ุฑูุชู ณ ูุฑุญููโุง -->
  <div class="mt-4 space-y-4">
    <div class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 sm:p-5 shadow-sm space-y-4">
      <div class="flex items-start gap-3">
        <div class="flex-shrink-0 w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-100 to-green-200 dark:from-emerald-900/50 dark:to-green-800/40 text-emerald-700 dark:text-emerald-200 grid place-items-center">
          <i class="fa-solid fa-list-check text-base"></i>
        </div>
        <div>
          <h2 class="text-lg font-extrabold text-gray-900 dark:text-white">ุขููุฒุด ุฑูุชู ฺฉุงุฑ ูุดุงูุฑ ุงููุงฺฉ (ณ ูุฑุญูู ุงุตู)</h2>
          <p class="text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1">
            ุฑูุชู ุณุงุฏู ุจุฑุง ุฌุฐุจ ูุดุชุฑ ูุงูุนุ ูุฏุฑุช ุจุงุฒุฏุฏ ุญุฑููโุง ู ุจุณุชู ูุฑุงุฑุฏุงุฏ.
          </p>
        </div>
      </div>

      <div class="space-y-3 text-sm text-gray-800 dark:text-gray-100 leading-relaxed">
        <div class="rounded-xl border border-emerald-100 dark:border-emerald-800/60 bg-emerald-50/60 dark:bg-emerald-900/20 p-3 sm:p-4 shadow-[0_8px_24px_-18px_rgba(16,185,129,0.6)]">
          <div class="flex items-start gap-2">
            <span class="mt-0.5 text-emerald-600 dark:text-emerald-300 font-bold">ฑ๏ธโฃ ุจุงุฒุงุฑุงุจ</span>
          </div>
          <p class="mt-1 text-xs sm:text-sm text-gray-800 dark:text-gray-100 leading-relaxed">
            ูุธูู ูุดุงูุฑ ุงู ุงุณุช ฺฉู ูุงู ุฑุง ุจูโุตูุฑุช ฺฉุงูู ู ุฏูู ูุทุงูุนู ฺฉุฑุฏู ู ุขู ุฑุง ุจูโุตูุฑุช ุชููู ู ุดูุงู ุจู ูุดุชุฑ ูุนุฑู ฺฉูุฏ ุชุง ูุดุชุฑ ูุงูุน ุฌุฐุจ ุดูุฏ.
            ุงู ูุฑุญูู ุดุงูู ูุทุงูุนู ฺฉุงูู ูุงูุ ุงูุชุดุงุฑ ุขฺฏู ู ูพุงุณุฎโฺฏู ุณุฑุน ุจู ูุดุชุฑุงู ุงุณุช.
          </p>
        </div>

        <div class="rounded-xl border border-amber-100 dark:border-amber-800/60 bg-amber-50/60 dark:bg-amber-900/20 p-3 sm:p-4 shadow-[0_8px_24px_-18px_rgba(251,191,36,0.6)]">
          <div class="flex items-start gap-2">
            <span class="mt-0.5 text-amber-600 dark:text-amber-300 font-bold">ฒ๏ธโฃ ุจุงุฒุฏุฏ</span>
          </div>
          <p class="mt-1 text-xs sm:text-sm text-gray-800 dark:text-gray-100 leading-relaxed">
            ุฏุฑ ุงู ูุฑุญูู ูุดุงูุฑ ุจุงุฏ ุจุง ูุงุธุฑ ูุนุงููู ููุงููฺฏโูุง ูุงุฒู ุฑุง ุจูโุตูุฑุช ุชููู ุงูุฌุงู ุฏูุฏ ู ุจุงุฒุฏุฏ ุฑุง ุญุฑููโุง ูุฏุฑุช ฺฉูุฏ ุชุง ูุดุชุฑ ุจู ุชุตูู ูุฒุฏฺฉ ุดูุฏ.
            ูุฏู ุจุงุฒุฏุฏ ููุท ุฏุฏู ููฺฉ ูุณุชุ ุจูฺฉู ุณูุฌุด ูุฒุงู ุนูุงูู ู ุซุจุช ูุชุฌู ุจุงุฒุฏุฏ ุงุณุช.
          </p>
        </div>

        <div class="rounded-xl border border-indigo-100 dark:border-indigo-800/60 bg-indigo-50/60 dark:bg-indigo-900/20 p-3 sm:p-4 shadow-[0_8px_24px_-18px_rgba(99,102,241,0.6)]">
          <div class="flex items-start gap-2">
            <span class="mt-0.5 text-indigo-600 dark:text-indigo-300 font-bold">ณ๏ธโฃ ูุนุงููู ๐ฐ</span>
          </div>
          <p class="mt-1 text-xs sm:text-sm text-gray-800 dark:text-gray-100 leading-relaxed">
            ูพุณ ุงุฒ ุจุงุฒุฏุฏุ ูุดุงูุฑ ุจุง ูพฺฏุฑ ูุคุซุฑ ู ูุฐุงฺฉุฑู ุงุตููุ ูุนุงููู ุฑุง ุจู ูุฑุงุฑุฏุงุฏ ุชุจุฏู ูโฺฉูุฏ.
            ูุชุฌู ุงู ูุฑุญูู ุจุณุชู ูุฑุงุฑุฏุงุฏ ู ุฏุฑุงูุช ูพูุฑุณุงูุช ุงุณุช.
          </p>
        </div>
      </div>
    </div>
  </div>

  {% set bottom_nav_active = 'training' %}
  {% include 'express_partner/partials/bottom_nav.html' %}

</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const steps = Array.from(document.querySelectorAll('.routine-step'));
    const progressBar = document.getElementById('routineProgressBar');
    const progressText = document.getElementById('routineProgressText');
    const storageKey = 'vinor_routine_steps_v1';

    function loadState() {
      try {
        const saved = JSON.parse(localStorage.getItem(storageKey) || '[]');
        steps.forEach(cb => {
          cb.checked = saved.includes(cb.dataset.step);
        });
      } catch (_) {}
    }

    function saveState() {
      const checked = steps.filter(cb => cb.checked).map(cb => cb.dataset.step);
      try { localStorage.setItem(storageKey, JSON.stringify(checked)); } catch (_) {}
    }

    function syncProgress() {
      const total = steps.length || 1;
      const done = steps.filter(cb => cb.checked).length;
      const percent = Math.round((done / total) * 100);
      if (progressBar) progressBar.style.width = percent + '%';
      if (progressText) progressText.textContent = `${done} / ${total}`;
    }

    loadState();
    syncProgress();

    steps.forEach(cb => {
      cb.addEventListener('change', () => {
        saveState();
        syncProgress();
      });
    });
  });
</script>
{% endblock %}

