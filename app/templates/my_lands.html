{% extends "base.html" %}

{% block title %}Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ù† | Ø§Ù…Ù„Ø§Ú© Ø¢Ø³Ù…Ø§Ù† Ú¯Ø±Ù…Ø§Ø¨Ø³Ø±Ø¯{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-6">
  <h2 class="text-xl font-bold text-green-700 mb-4">ğŸ“‹ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ù†</h2>

  {% if lands %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for land in lands %}
      <div class="relative bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow hover:shadow-lg transition overflow-hidden">

        <!-- ÙˆØ¶Ø¹ÛŒØª Ø¢Ú¯Ù‡ÛŒ -->
        {% if land.status == 'pending' %}
          <div class="absolute top-2 right-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded">
            Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ£ÛŒÛŒØ¯
          </div>
        {% elif land.status == 'approved' %}
          <div class="absolute top-2 right-2 bg-green-600 text-white text-xs font-bold px-2 py-1 rounded">
            ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡
          </div>
        {% elif land.status == 'rejected' %}
          <div class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded">
            Ø±Ø¯ Ø´Ø¯Ù‡
          </div>
        {% endif %}

        <a href="{{ url_for('main.land_detail', code=land.code) }}">
          {% if land.images and land.images[0] %}
            <img src="{{ url_for('main.uploaded_file', filename=land.images[0]) }}"
                 alt="ØªØµÙˆÛŒØ± Ø²Ù…ÛŒÙ† {{ land.title }}"
                 loading="lazy"
                 class="w-full h-48 object-cover rounded-t-xl">
          {% else %}
            <div class="w-full h-48 bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-400 rounded-t-xl">
              Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±
            </div>
          {% endif %}
        </a>

        <div class="p-4">
          <h3 class="text-lg font-semibold text-green-700 dark:text-green-400 truncate">{{ land.title }}</h3>
          <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">ğŸ“ {{ "{:,}".format(land.size | int) if land.size else "?" }} Ù…ØªØ± | ğŸ“ {{ land.location or "?" }}</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">ğŸ†” Ú©Ø¯ Ù…Ù„Ú©: {{ land.code }}</p>

          <div class="mt-4 flex justify-between items-center gap-2">
            <a href="{{ url_for('main.edit_land', code=land.code) }}"
               class="flex-1 text-center bg-blue-500 hover:bg-blue-600 text-white text-sm px-4 py-2 rounded-lg">
              âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´
            </a>
            <form method="POST" action="{{ url_for('main.delete_land', code=land.code) }}"
                  onsubmit="return confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¢Ú¯Ù‡ÛŒ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')">
              <button type="submit"
                      class="flex-1 text-center bg-red-500 hover:bg-red-600 text-white text-sm px-4 py-2 rounded-lg w-full">
                ğŸ—‘ï¸ Ø­Ø°Ù
              </button>
            </form>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="bg-yellow-100 dark:bg-yellow-200 border border-yellow-300 text-yellow-800 p-4 rounded">
      Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ø¢Ú¯Ù‡ÛŒâ€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.
    </div>
  {% endif %}
</div>
{% endblock %}
